// 2. This code loads the IFrame Player API code asynchronously.
function setVotes(){$.ajax({url:"/replays/getVotes/"+replayUUID,dataType:"json",cache:!0,success:function(a){$("#ggBut").next(".tooltip").children(".tooltip-inner").html(formatNumber(a.Replay.gg_count)),$("#ggBut").attr("rel",a.Replay.gg_count),$("#cheeseBut").next(".tooltip").children(".tooltip-inner").html(formatNumber(a.Replay.cheese_count)),$("#cheeseBut").attr("rel",a.Replay.cheese_count)}})}function doVote(a,b){$.get("/dreplays/vote/"+replayUUID+"/"+a);var c=parseInt(b.attr("rel"));c=c+1,b.next(".tooltip").children(".tooltip-inner").html(c)}function hideDock(){$("#dockDetails").hide(),$("#dock").removeClass("large").addClass("small"),$("#showDock").show()}function enableActions(){player1Loaded&&player2Loaded?($("#actions .btn").show(),$("#loading").hide()):setTimeout(enableActions,1e3)}function onPlayerReady2(a){player2.cuePlaylist(player2Vids),player2Loaded=!0,enableActions()}function onPlayerReady1(a){player1.cuePlaylist(player1Vids),player1Loaded=!0,enableActions()}function onYouTubePlayerAPIReady(){player1=new YT.Player("vid1",{events:{onReady:onPlayerReady1}}),player2=new YT.Player("vid2",{events:{onReady:onPlayerReady2}})}var tag=document.createElement("script");tag.src="http://www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var player1,player2,player1Loaded=!1,player2Loaded=!1;$(function(){setVotes(),$("#playVideos").click(function(a){a.preventDefault(),player1.playVideo(),player2.playVideo(),hideDock()}),$("#stopVideos").click(function(a){a.preventDefault(),player1.stopVideo(),player2.stopVideo()}),$("#pauseVideos").click(function(a){a.preventDefault(),player1.pauseVideo(),player2.pauseVideo()}),$("#startOverVideos").click(function(a){a.preventDefault(),player1.seekTo(0,!1),player2.seekTo(0,!1)}),$("#smallVideos").click(function(a){a.preventDefault(),$("#vid1").width(640).height(385),$("#vid2").width(640).height(385)}),$("#largeVideos").click(function(a){a.preventDefault(),$("#vid1").width(853).height(505),$("#vid2").width(853).height(505)}),$("#toggleNav").click(function(a){a.preventDefault(),$("#topNav").is(":visible")?($(this).html("Show top nav"),$("#topNav").hide()):($("#topNav").show(),$(this).html("Hide top nav"))}),$("#toggleBkg").click(function(a){a.preventDefault(),"rgb(255, 255, 255)"==$("body").css("background-color")?$("body").css("background-color","#000000"):$("body").css("background-color","#FFFFFF")}),$("#dock").hover(function(){$("#showDock").hide(),$(this).removeClass("small").addClass("large"),$("#dockDetails").show()},function(){hideDock()}),$("#ggBut").click(function(a){a.preventDefault(),doVote(1,$(this))}),$("#cheeseBut").click(function(a){a.preventDefault(),doVote(2,$(this))});var a=$(window).height();$("#dock").css("height",a),$("#dockDetails").css("height",a-100),$(window).resize(function(){var a=$(window).height();$("#dock").css("height",a),$("#dockDetails").css("height",a-100)})})